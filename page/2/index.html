<!doctype html>



  


<html class="theme-next pisces use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=5.1.0" />






<meta name="description" content="参差多态是幸福的本源">
<meta property="og:type" content="website">
<meta property="og:title" content="GeekCat的脑窝">
<meta property="og:url" content="http://geekcat.me/page/2/index.html">
<meta property="og:site_name" content="GeekCat的脑窝">
<meta property="og:description" content="参差多态是幸福的本源">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="GeekCat的脑窝">
<meta name="twitter:description" content="参差多态是幸福的本源">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://geekcat.me/page/2/"/>





  <title> GeekCat的脑窝 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">GeekCat的脑窝</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">Gakki 就是正义</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2017/01/15/2017/构造自定义领域语言（二）/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/15/2017/构造自定义领域语言（二）/" itemprop="url">
                  构造自定义领域语言（二）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-15T11:14:08+08:00">
                2017-01-15
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/15/2017/构造自定义领域语言（二）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/15/2017/构造自定义领域语言（二）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>上星期比较忙哇，鸽了，这个星期开始补，进展缓慢那补什么呢，翻译一篇官方的词法规则文档吧。待我理解完了AST和翻译器部分开始撸代码┑(￣。。￣)┍</p>
<h1 id="词法规则（Lexer-Rules）"><a href="#词法规则（Lexer-Rules）" class="headerlink" title="词法规则（Lexer Rules）"></a>词法规则（Lexer Rules）</h1><p>词法的语法由词法规则组成，从而分成不同的模式。词法模式允许我们将单个词法语法分成多个子规则。词法分析器只能从当前模式中返回匹配的tokens。</p>
<p>词法规则的的定义或多或少遵循了解析器的语法，但是词法规则不能有参数、返回值和局部变量。词法规则名称必须以大写字母开头，用以区别语法解析器的规则名称：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">/** Optional document comment */</div><div class="line">TokenName : alternative1 | ... | alternativeN ;</div></pre></td></tr></table></figure></p>
<p>你也可以定义不是词法tokens的规则，而是帮助识别tokens片段的规则，这些规则对于语法解析器是不可见的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">fragment</div><div class="line">HelperTokenRule : alternative1 | ... | alternativeN ;</div></pre></td></tr></table></figure>
<p>例如，<code>DIGIT</code> 是一个很常见的规则：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">INT : DIGIT+ ; // references the DIGIT helper rule</div><div class="line">fragment DIGIT : [0-9] ; // not a token by itself</div></pre></td></tr></table></figure>
<h1 id="词法模式（Lexical-Modes）"><a href="#词法模式（Lexical-Modes）" class="headerlink" title="词法模式（Lexical Modes）"></a>词法模式（Lexical Modes）</h1><p>词法模式允许你通过上下文对词法规则进行分组。他就像有多个子运算，但是对于特定上线文只有那么一些。词法分析器只能通过当前模式中的规则进行匹配返回tokens。词法分析器开始是默认模式的，除非指定模式，否则所有规则都是属于默认规则的。在组合的语法中是不能使用词法模式的，只有单词的词法语法定义中可以<a href="https://pragprog.com/book/tpantlr2/the-definitive-antlr-4-reference" target="_blank" rel="external">（请参阅XMLLExer）</a>。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">rules in default mode</div><div class="line">...</div><div class="line">mode MODE1;</div><div class="line">rules in MODE1</div><div class="line">...</div><div class="line">mode MODEN;</div><div class="line">rules in MODEN</div><div class="line">...</div></pre></td></tr></table></figure></p>
<h1 id="词法规则元素（Lexer-Rule-Elements）"><a href="#词法规则元素（Lexer-Rule-Elements）" class="headerlink" title="词法规则元素（Lexer Rule Elements）"></a>词法规则元素（Lexer Rule Elements）</h1><p>词法规则允许两种构造方法他们是在语法规则中不可用的：<code>..</code>范围云算法和使用<code>[]</code>扩起字符集。不要将字符集的规则与词法规则混淆。<code>[characters]</code>仅表示<code>characters</code>在词法规则的字符几中，这里是所有词法规则元素的简介：</p>
<table>
<thead>
<tr>
<th style="text-align:left">词法</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">T</td>
<td style="text-align:left">在当前位置允许匹配T，匹配规则名称必须以大写字母开头。</td>
</tr>
<tr>
<td style="text-align:left">’literal’</td>
<td style="text-align:left">匹配字符或者字符串文字，例如， ’while’ or ’=’.</td>
</tr>
<tr>
<td style="text-align:left">[char set]</td>
<td style="text-align:left">匹配字符集中的一个字符，将x-y解释为范围x和y之间的字符集，包括自身。以下转义字符被解释为单个特殊字符：\n, \r, \b, \t, and \f。匹配 ]、\或者 - 你必须使用转移符 \。您也可以使用Unicode字符规范：\uXXXX。这里是一些例子：<br><code>WS : [ \n\u000D] -&gt; skip ; // same as [ \n\r] <br>ID : [a-zA-Z] [a-zA-Z0-9]* ; // match usual identifier spec <br>DASHBRACK : [-]]+ ; // match - or ] one or more times</code></td>
</tr>
<tr>
<td style="text-align:left">’x’..’y’</td>
<td style="text-align:left">匹配范围x和y之间的任意单个字符。例如，’a’..’z’。 ‘a’..’z’与[a-z]相同。</td>
</tr>
<tr>
<td style="text-align:left">T</td>
<td style="text-align:left">调用语法规则T;一般允许递归，但是左递归是禁止的，T可以是常规tokens或者片段规则（fragment rule）：<br><code>ID : LETTER (LETTER&#124;’0’..’9’)* ; fragment LETTER : [a-zA-Z\u0080-\u00FF_] ;</code></td>
</tr>
<tr>
<td style="text-align:left">.</td>
<td style="text-align:left">点是与任何单个字符匹配的单字符通配符，例如：<br><code>ESC : ‘\‘ . ; // match any escaped \x character</code></td>
</tr>
<tr>
<td style="text-align:left">{«action»}</td>
<td style="text-align:left">Lexer操作可以出现在4.2之外的任何位置，而不仅仅出现在最外面用来替代末尾。 词法分析器根据规则中动作的位置来执行动作。 要为具有多个选项执行单个操作，可以将括号括在括号中，然后再执行操作：<br><code>END : (‘endif’&#124;’end’) {System.out.println(“found an end”);} ;</code><br>该操作要符合目标语言的语法。 ANTLR将动作的内容逐字复制到生成的代码中;并没有像$ x.y这样的表达式的翻译，因为着是在动作规则中。只有最外层tokens规则中的action被执行。换句话说，如果STRING调用ESC_CHAR和ESC_CHAR有一个动作，当词法分析器在STRING开始匹配时，不执行该动作。</td>
</tr>
<tr>
<td style="text-align:left">{«p»}?</td>
<td style="text-align:left">评价语义谓词«p»。 如果“p”在运行时评估为false，则周围规则变为“不可见”（不可见）。 表达式«p»符合目标语言语法。 虽然语义谓词可以出现在词法规则中的任何地方，但在规则末尾使用它们是最有效的。 一个警告是，语义谓词必须先于词法分析器动作。 请参阅Lexer规则中的谓词。</td>
</tr>
<tr>
<td style="text-align:left">~x</td>
<td style="text-align:left">匹配不在x中描述的集合中的任何单个字符。Set x可以是单个字符、范围或～<code>（’x’&#124;’y’&#124;’z’）</code>或<code>～[xyz]</code>的子字符集表示。这里有一个规则使用～来匹配任意字符，使用～[\ r \ n] ：<br><code>COMMENT : ‘#’ ~[\r\n] ‘\r’? ‘\n’ -&gt; skip ;<code></code></code></td>
</tr>
</tbody>
</table>
<p>相对于语法规则，词法规则允许子句在括号和EBNF运算符中：?,<em>,+。COMMENT规则说明了</em>,?的使用规则。使用+对于[0-9]+可以去匹配数字，词法子句也可以使用?作为后缀再EBNF操作中。</p>
<h1 id="递归的词法规则（Recursive-Lexer-Rules）"><a href="#递归的词法规则（Recursive-Lexer-Rules）" class="headerlink" title="递归的词法规则（Recursive Lexer Rules）"></a>递归的词法规则（Recursive Lexer Rules）</h1><p>ANTLR词法规则可以是递归的，不同于大多数词法语法工具。当你想匹配嵌套的tokens，如嵌套的动作块，这是很方便的：{…{…}…}。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">lexer grammar Recur;</div><div class="line">ACTION : &apos;&#123;&apos; ( ACTION | ~[&#123;&#125;] )* &apos;&#125;&apos; ;</div><div class="line">WS : [ \r\t\n]+ -&gt; skip ;</div></pre></td></tr></table></figure>
<h1 id="冗余字符串字面量（Redundant-String-Literals）"><a href="#冗余字符串字面量（Redundant-String-Literals）" class="headerlink" title="冗余字符串字面量（Redundant String Literals）"></a>冗余字符串字面量（Redundant String Literals）</h1><p>请注意，不要在多个词法分析器规则的右侧指定相同的字符串文字。这样的文字是模糊的，会导致可以匹配多种token类型。ANTLR 会导致语法解析时匹配这类模糊的文字时不可用。对于跨模式的规则也是如此。例如，以下词法语法定义具有相同字符序列的两个标记：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">lexer grammar L;</div><div class="line">AND : &apos;&amp;&apos; ;</div><div class="line">mode STR;</div><div class="line">MASK : &apos;&amp;&apos; ;</div></pre></td></tr></table></figure>
<p>解析器语法规则不能引用文字“＆”，但它可以引用标记的名称：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">parser grammar P;</div><div class="line">options &#123; tokenVocab=L; &#125;</div><div class="line">a : &apos;&amp;&apos; // results in a tool error: no such token</div><div class="line">    AND // no problem</div><div class="line">    MASK // no problem</div><div class="line"> ;</div></pre></td></tr></table></figure>
<p>这里构建了一个测试序列：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">$ antlr4 L.g4 # yields L.tokens file needed by tokenVocab option in P.g4</div><div class="line">$ antlr4 P.g4</div><div class="line">error(126): P.g4:3:4: cannot create implicit token for string literal &apos;&amp;&apos; in non-combined grammar</div></pre></td></tr></table></figure>
<h1 id="词法规则的动作（Lexer-Rule-Actions）"><a href="#词法规则的动作（Lexer-Rule-Actions）" class="headerlink" title="词法规则的动作（Lexer Rule Actions）"></a>词法规则的动作（Lexer Rule Actions）</h1><p>ANTLR词法分析器在匹配词法规则之后创建Token对象。每个对token的请求在Lexer.nextToken中开始，一旦它识别出令牌，它就调用emit函数。emit从词法分析器的当前状态收集的信息为基础以构建token。它访问字段_type，_text，_channel，_tokenStartCharIndex，_tokenStartLine和_tokenStartCharPositionInLine。您可以使用各种setter方法（如setType）设置这些的状态。 例如，如果enumIsKeyword为false，则以下规则将枚举转换为标识符。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ENUM : &apos;enum&apos; &#123;if (!enumIsKeyword) setType(Identifier);&#125; ;</div></pre></td></tr></table></figure>
<p>ANTLR在词法操作中没有特殊的$x属性转换（与v3版本不同）<br>对于词法规则，最多可以有一个单独的动作，而不管该规则中有多少备选方案。</p>
<h1 id="词法命令行（Lexer-Commands）"><a href="#词法命令行（Lexer-Commands）" class="headerlink" title="词法命令行（Lexer Commands）"></a>词法命令行（Lexer Commands）</h1><p>为了避免将语法绑定到特定的目标语言，ANTLR支持词法命令。与任意嵌入操作不同，这些命令遵循特定语法，并且仅限于几个常用命令。Lexer命令显示在词法分析器规则定义的最外部替换的末尾。像任意动作一样，每个token规则只能有一个。 词法命令由 - &gt;运算符组成，后跟一个或多个可以选择参数的命令名：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">TokenName : «alternative» -&gt; command-name</div><div class="line">TokenName : «alternative» -&gt; command-name («identifier or integer»)</div></pre></td></tr></table></figure>
<p>可选的多个命令，以逗号分隔。这里是有效的命令名称：</p>
<ul>
<li>skip</li>
<li>more</li>
<li>popMode</li>
<li>mode( x )</li>
<li>pushMode( x )</li>
<li>type( x )</li>
<li>channel( x )</li>
</ul>
<p>查看图书源代码的用法，一些示例如下所示</p>
<h2 id="skip"><a href="#skip" class="headerlink" title="skip"></a>skip</h2><p>skip命令告诉词法分析器丢弃那些文本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">ID : [a-zA-Z]+ ; // match identifiers</div><div class="line">INT : [0-9]+ ; // match integers</div><div class="line">NEWLINE:&apos;\r&apos;? &apos;\n&apos; ; // return newlines to parser (is end-statement signal)</div><div class="line">WS : [ \t]+ -&gt; skip ; // toss out whitespace</div></pre></td></tr></table></figure>
<h2 id="mode-pushMode-popMode-and-more"><a href="#mode-pushMode-popMode-and-more" class="headerlink" title="mode(), pushMode(), popMode, and more"></a>mode(), pushMode(), popMode, and more</h2><p>模式命令改变模式堆栈，因此改变词法分析器的模式。 more命令强制词法分析器获得另一个标记，但不抛出当前文本。token类型将是匹配“最终”的规则（即，没有更多或跳过命令的那个）的token类型。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">// Default &quot;mode&quot;: Everything OUTSIDE of a tag</div><div class="line">COMMENT : &apos;&lt;!--&apos; .*? &apos;--&gt;&apos; ;</div><div class="line">CDATA   : &apos;&lt;![CDATA[&apos; .*? &apos;]]&gt;&apos; ;OPEN : &apos;&lt;&apos; -&gt; pushMode(INSIDE) ;</div><div class="line"> ...</div><div class="line">XMLDeclOpen : &apos;&lt;?xml&apos; S -&gt; pushMode(INSIDE) ;</div><div class="line">SPECIAL_OPEN: &apos;&lt;?&apos; Name -&gt; more, pushMode(PROC_INSTR) ;</div><div class="line">// ----------------- Everything INSIDE of a tag ---------------------</div><div class="line">mode INSIDE;</div><div class="line">CLOSE        : &apos;&gt;&apos; -&gt; popMode ;</div><div class="line">SPECIAL_CLOSE: &apos;?&gt;&apos; -&gt; popMode ; // close &lt;?xml...?&gt;</div><div class="line">SLASH_CLOSE  : &apos;/&gt;&apos; -&gt; popMode ;</div></pre></td></tr></table></figure>
<p>另外检查：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">lexer grammar Strings;</div><div class="line">LQUOTE : &apos;&quot;&apos; -&gt; more, mode(STR) ;</div><div class="line">WS : [ \r\t\n]+ -&gt; skip ;</div><div class="line">mode STR;</div><div class="line">STRING : &apos;&quot;&apos; -&gt; mode(DEFAULT_MODE) ; // token we want parser to see</div><div class="line">TEXT : . -&gt; more ; // collect more text for string</div></pre></td></tr></table></figure>
<p>弹出模式堆栈的底层将导致异常。使用模式切换命令mode更改当前堆栈顶部。一个或者多个more是相同的和位置并没有关系。</p>
<h2 id="type"><a href="#type" class="headerlink" title="type()"></a>type()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">lexer grammar SetType;</div><div class="line">tokens &#123; STRING &#125;</div><div class="line">DOUBLE : &apos;&quot;&apos; .*? &apos;&quot;&apos;   -&gt; type(STRING) ;</div><div class="line">SINGLE : &apos;\&apos;&apos; .*? &apos;\&apos;&apos; -&gt; type(STRING) ;</div><div class="line">WS     : [ \r\t\n]+    -&gt; skip ;</div></pre></td></tr></table></figure>
<p>对于多个type()命令，只有最右边的命令有效果。</p>
<h2 id="channel"><a href="#channel" class="headerlink" title="channel()"></a>channel()</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">BLOCK_COMMENT</div><div class="line">    : &apos;/*&apos; .*? &apos;*/&apos; -&gt; channel(HIDDEN)</div><div class="line">    ;</div><div class="line">LINE_COMMENT</div><div class="line">    : &apos;//&apos; ~[\r\n]* -&gt; channel(HIDDEN)</div><div class="line">    ;</div><div class="line">... </div><div class="line">// ----------</div><div class="line">// Whitespace</div><div class="line">//</div><div class="line">// Characters and character constructs that are of no import</div><div class="line">// to the parser and are used to make the grammar easier to read</div><div class="line">// for humans.</div><div class="line">//</div><div class="line">WS : [ \t\r\n\f]+ -&gt; channel(HIDDEN) ;</div></pre></td></tr></table></figure>
<p>从4.5开始，您还可以在词法分析器规则上方使用以下结构来定义频道名称（如枚举）：</p>
<p><code>channels { WSCHANNEL, MYHIDDEN }</code></p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2017/01/02/2017/构造自定义领域语言（一）/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2017/01/02/2017/构造自定义领域语言（一）/" itemprop="url">
                  构造自定义领域语言（一）
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-01-02T11:18:46+08:00">
                2017-01-02
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/技术/" itemprop="url" rel="index">
                    <span itemprop="name">技术</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2017/01/02/2017/构造自定义领域语言（一）/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2017/01/02/2017/构造自定义领域语言（一）/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>最近的工作一直在开发公司内部的数据查询平台，随着查询引擎的增加，后台的复杂度徒增。使用单纯的SQL拼接来生成不同的SQL方言已经很难维护。个人主张设计一套自定义的领域语言，用作界面查询的表达，后台统一翻译成IR(Intermediate language)，再通过不同的翻译器生成不同平台的SQL语言。</p>
<p>例如神策系统中这段中文在后台需要转化成不同查询引擎的SQL。<br><img src="/images/神策.png"><br>但是大型系统就像马拉的战车，系统越大，马越多就越难拐弯。所以个人想先使用业余时间做一番实践，观察结果，再考虑生成环境的转型。</p>
<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><p>工欲善其事必先利其器，综合考虑使用ANTLR工具来进行实践（Hive SQL的解析就是使用的ANTLR工具，ANTLR可以通过简洁的语法生成解析树、AST）。</p>
<p>ANTLR ANTLR官网<br>GQL 准备通过这个项目来同步学习实践的代码。<br>编程语言实现模式、The Definitive ANTLR 4 Reference 学习书籍</p>
<h1 id="解析起步"><a href="#解析起步" class="headerlink" title="解析起步"></a>解析起步</h1><p>ANTLR使用递归下降的方式解析语言，《编程语言实现模式》中前四种模式：</p>
<p>模式一：从文法到递归下降识别器（无法解决左递归文法，每层递归都无法消解任何词语），文法中每一个规则对应一个Parser类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">G</span> <span class="keyword">extends</span> <span class="title">Parser</span> </span>&#123;</div><div class="line">	<span class="comment">/**</span></div><div class="line">	 * 词法单元类型的定义</div><div class="line">	 * 合适的构造函数</div><div class="line">	 * 规则对应的方法</div><div class="line">	 */</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>模式二：LL(1)递归下降的词法解析器，每次向前看一个字符，一次token一个词法单元。<br>模式三：LL(1)递归下降的语法解析器，每次向前看一个词法单元，通过语法规则前缀判断如何应用规则（对于多个规则有公共左子式，向前读一个词法单元就无能为力了）。<br>模式四：LL(K)递归下降的语法解析器，相比模式三，向前读的词法单元变成了K个。只要K大于公共左子式的长度，就可以解析下去。</p>
<p>解析实践</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">grammar GQL;</div><div class="line">gql_behavior  : &apos;按&apos; cycle statistics;</div><div class="line">cycle : &apos;每天&apos;</div><div class="line">      | &apos;每月&apos;</div><div class="line">      | &apos;每小时&apos;</div><div class="line">      | &apos;每分钟&apos;</div><div class="line">      ;</div><div class="line">statistics : &apos;统计&apos; index groups;</div><div class="line">index : table &apos;的&apos; columns;</div><div class="line">table : (~(&apos;的&apos;))+;</div><div class="line">columns : column (&apos;和&apos; columns)*;</div><div class="line">column : ~(&apos;的&apos;|&apos;和&apos;|&apos;按&apos;)+;</div><div class="line">groups : group+;</div><div class="line">group : &apos;按&apos; groupItem &apos;查看&apos;;</div><div class="line">groupItem : ANY_CHAR+;</div><div class="line">ANY_CHAR : .;</div><div class="line">WS : [ \t\r\n]+ -&gt; skip ;</div></pre></td></tr></table></figure>
<p>匹配“按每天统计用户表的触发用户数和触发用户总次数按渠道查看按时间查看”</p>
<img src="/images/解析树.png">
<p>下星期继续更新实践</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2016/12/29/2016 Year in Review/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/29/2016 Year in Review/" itemprop="url">
                  Merry Christmas！
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-29T00:31:16+08:00">
                2016-12-29
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/review/" itemprop="url" rel="index">
                    <span itemprop="name">review</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/29/2016 Year in Review/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/29/2016 Year in Review/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>2016年，从学校走向社会，生活节奏自由而明快。告别实验室到寝室的两点一线，拥抱大广州的温暖明媚。</p>
<h1 id="一、二月"><a href="#一、二月" class="headerlink" title="一、二月"></a>一、二月</h1><p>苦逼的论文季。15年找到工作后便拖延症附体，只得寒假里闭关，记得把自己关在家里足足有一个月，整日与office相依为命，孤苦愤懑，好歹是把初稿给挤了出来（六月份又被一通魔改那就是后话了），精神消瘦，肉体膨胀。</p>
<p><a href="https://book.douban.com/subject/5333562/" target="_blank" rel="external">《深入理解计算机系统》</a> 这是这两个月看的唯一一本技术书，简直圣经级教材，全面的的讲解了计算机整体的运行机理，完全弥补了我本科组成原理、操作系统神游四方的知识空洞。我就纳闷当年怎么不用此书开课，非得啃国内老教授晦涩难懂，一直纠结硬件层，让人晕头转向的大作。</p>
<h1 id="三、四、五月"><a href="#三、四、五月" class="headerlink" title="三、四、五月"></a>三、四、五月</h1><p>新鲜的实习季。初来数据运营组实习，我的工作任务主要是接手一个PHP的Web工程，还好PHP是世界上最好的语言，花了一个星期的时间从入门到放弃上手。但最最痛苦的是写Hive SQL，1.3版本的Hive慢到乌龟爬，Bug到处有，对于急性子简直是天生的折磨（还好我战胜了它 o(╬￣皿￣)=○# (￣#)3￣)）。这段时间里最大的收获倒不是学习了新的语言，新的查询工具，而是认识到数据组整体的工作本质。一开始使用上报SDK进行数据埋点，消息队列、Hadoop对再对数据进行收集清洗，定时调度生成多维度的数据报表提供给数据分析人员，帮助运营人员决策。</p>
<p><a href="https://book.douban.com/subject/6559267/" target="_blank" rel="external">《深入PHP面向对象、模式与实践》</a>、<a href="https://book.douban.com/subject/26635862/" target="_blank" rel="external">《Modern PHP》</a> PHP入门我看的是这两本书，如果对面向对象、设计模式比较熟悉，看完语法层第一本书就可以跳着过一遍了，第二本则侧重实践风格、工具使用、测试规范等等。<br><a href="https://book.douban.com/subject/25791255/" target="_blank" rel="external">《Hive编程指南》</a> 一本工具书，不懂就翻，相对来说Hive资料网上相对较少，这是一个很好的补充。</p>
<h1 id="六月"><a href="#六月" class="headerlink" title="六月"></a>六月</h1><p>烦闷的答辩季。一心想成为小透明的我，还是应验了墨菲定律，论文抽中万五。经历一个星期惨无人道的论文魔改。git管理的论文目录从20M飙升到50M，一句话就是：你不知道我经历了神马。</p>
<h1 id="七、八、九月"><a href="#七、八、九月" class="headerlink" title="七、八、九月"></a>七、八、九月</h1><p>疯狂的试用期。试用期的工作强度与实习期就完全是天壤之别，完不成工作进度的我，就经常周末加班了 ┐(—__—)┌。(头发没了，我也变强了——《一拳超人》)</p>
<p><a href="https://es.xiaoleilu.com/" target="_blank" rel="external">《Elasticsearch 权威指南》</a> 这本电子书帮助我完成了第一个体量比较大的功能，搜索整个公司用户的基本信息。<br><a href="https://book.douban.com/subject/6523762/" target="_blank" rel="external">《Hadoop权威指南》</a>、<a href="https://book.douban.com/subject/10748460/" target="_blank" rel="external">《Hbase权威指南》</a> 为了了解学习使用国内开源Kylin分布式分析引擎（底层使用Hbase进行存储），好对组里实现的魔改版Spark作竞品对比。<br><a href="https://book.douban.com/subject/26745943/" target="_blank" rel="external">《css揭秘》</a> 作为有名组里的胶水人物，当然是不只懂得数据相关的知识哇，不过css入门我是不建议看这本书的。</p>
<h1 id="十、十一、十二月"><a href="#十、十一、十二月" class="headerlink" title="十、十一、十二月"></a>十、十一、十二月</h1><p>转正后的猿人生活。我相信选择成为猿的同志们，生命中总有那么几个契机，引导了你。对我而言，第一道转折是小学时期接触的一款游戏：《重装机兵》(1991由日本游戏公司Crea-Tech出品)，主人公和志同道合的朋友踏上充满危险的冒险之旅，开着男人的浪漫（坦克）拯救世界。然而给我种下这颗种子的并不是主人公，而是最终Boss若亚，身为分布式电脑集群的它，被制造的初衷是为了保护环境。然而病毒感染，程序错乱，导致计算出错，得出了保护地球环境就必须完全消灭人类的结论。好奇心就是这么神奇，为我打开了第一道大门。而这份职业也就是如此神奇能让你保持饥饿，保持愚蠢，哈哈美妙的生活。</p>
<p><a href="https://book.douban.com/subject/10484692/" target="_blank" rel="external">《Java并发编程实战》</a> 为开发组内的调度系统，打下基础。<br><a href="https://book.douban.com/subject/1052241/" target="_blank" rel="external">《设计模式》</a> 又是一本圣经读物。<br><a href="https://book.douban.com/subject/10546125/" target="_blank" rel="external">《JavaScript高级程序设计》</a> 自己业余开始全面的学习前端知识。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2016/12/25/Merry Christmas！/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/25/Merry Christmas！/" itemprop="url">
                  Merry Christmas！
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-25T07:25:33+08:00">
                2016-12-25
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/广州/" itemprop="url" rel="index">
                    <span itemprop="name">广州</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/25/Merry Christmas！/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/25/Merry Christmas！/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>圣诞节哇，像舶来的美食，又在国内师傅的改良下呈现的糕点，又甜又红，一嘴下去，有些迷醉，我眼里竟是被特赦的囚犯，年底热情洋溢的上街放风。</p>
<p>小时候，我总喜欢，花大笔的银子，来买那些我眼里最古怪，最奇特的会变形的贺卡。送给玩伴和给我抄作业的姑娘。然后等待过年，等待压岁钱填补国库的亏空。</p>
<p>初中高中，家里穷到总算没钱可以给我乱花，圣诞节多半是坐在大会堂里，看表演，看窗外的雪，听各班班草班花们唱类似Jingle Bells的歌曲。</p>
<p>每年都可以是一个好圣诞哇，因为这不是传统节日，你可以开心快乐，你可以悲伤抽风。你可以回忆和朋友一起看的《小鬼当家》。你也可以独自一人以一种独特的方式review一下今年的喜怒哀乐。</p>
<p>今年我长了一对犄角，我有了大目标，也有了小心思。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2016/12/10/Gworm/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/10/Gworm/" itemprop="url">
                  Gworm
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-10T17:40:33+08:00">
                2016-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/10/Gworm/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/10/Gworm/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Gworm"><a href="#Gworm" class="headerlink" title="Gworm"></a>Gworm</h1><p>Gworm是一个java版的爬虫框架，以json格式作为返回。</p>
<h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ul>
<li><a href="#依赖包">依赖包</a></li>
<li><a href="#参数文件">参数文件</a><ul>
<li><a href="#爬取规则">爬取规则</a></li>
<li><a href="#请求参数">请求参数</a></li>
</ul>
</li>
<li><a href="#示例程序">示例程序</a><ul>
<li><a href="#初始化">初始化</a></li>
<li><a href="#链接生成器">链接生成器</a></li>
<li><a href="#数据操作">数据操作</a></li>
<li><a href="#异步加载">异步加载</a></li>
</ul>
</li>
</ul>
<h2 id="依赖包"><a href="#依赖包" class="headerlink" title="依赖包"></a>依赖包</h2><ul>
<li>JSON库 : Gson 2.6.2</li>
<li>DOM提取 : jsoup 18.3</li>
<li>WebDriver : selenium-java 2.53.0</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div></pre></td><td class="code"><pre><div class="line">#pom.xml</div><div class="line">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</div><div class="line"><span class="tag">&lt;<span class="name">project</span> <span class="attr">xmlns</span>=<span class="string">"http://maven.apache.org/POM/4.0.0"</span></span></div><div class="line">         <span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span></div><div class="line">         <span class="attr">xsi:schemaLocation</span>=<span class="string">"http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"</span>&gt;</div><div class="line">    <span class="tag">&lt;<span class="name">modelVersion</span>&gt;</span>4.0.0<span class="tag">&lt;/<span class="name">modelVersion</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.gyak.gworm<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gworm<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.google.code.gson<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>gson<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.6.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.jsoup<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>jsoup<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.8.3<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.seleniumhq.selenium<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>selenium-java<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.53.0<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">dependencies</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;<span class="name">build</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">plugins</span>&gt;</span></div><div class="line">            <span class="tag">&lt;<span class="name">plugin</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>maven-compiler-plugin<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.5.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></div><div class="line">                <span class="tag">&lt;<span class="name">configuration</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">source</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">source</span>&gt;</span></div><div class="line">                    <span class="tag">&lt;<span class="name">target</span>&gt;</span>1.7<span class="tag">&lt;/<span class="name">target</span>&gt;</span></div><div class="line">                <span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></div><div class="line">            <span class="tag">&lt;/<span class="name">plugin</span>&gt;</span></div><div class="line">        <span class="tag">&lt;/<span class="name">plugins</span>&gt;</span></div><div class="line"></div><div class="line">    <span class="tag">&lt;/<span class="name">build</span>&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;/<span class="name">project</span>&gt;</span></div></pre></td></tr></table></figure>
<h2 id="参数文件"><a href="#参数文件" class="headerlink" title="参数文件"></a>参数文件</h2><p>使用Gworm爬虫框架需要配置两份文件，爬虫规则文件、请求参数文件。</p>
<h3 id="爬取规则"><a href="#爬取规则" class="headerlink" title="爬取规则"></a>爬取规则</h3><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line">//src\test\resources\jd.json</div><div class="line">[</div><div class="line">  &#123;</div><div class="line">    "id": "Book",</div><div class="line">    "gwormArray": &#123;</div><div class="line">      "id": "bookList",</div><div class="line">      "rule": "#plist .gl-item",</div><div class="line">      "list": [</div><div class="line">        &#123;</div><div class="line">          "id": "bookName",</div><div class="line">          "rule": ".p-name",</div><div class="line">          "get": "text"</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">          "id": "bookPage",</div><div class="line">          "rule": ".p-name a",</div><div class="line">          "get": "href"</div><div class="line">        &#125;,</div><div class="line">        &#123;</div><div class="line">          "id": "bookAuthor",</div><div class="line">          "rule": ".author_type_1 a",</div><div class="line">          "get": "text"</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  &#125;</div><div class="line">]</div></pre></td></tr></table></figure>
<h3 id="请求参数"><a href="#请求参数" class="headerlink" title="请求参数"></a>请求参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">Accept=text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8</div><div class="line">Accept-Encoding=gzip, deflate, sdch</div><div class="line">Accept-Language=zh-CN,zh;q=0.8</div><div class="line">Connection=keep-alive</div><div class="line">User-Agent=Mozilla/5.0 (Windows NT 6.3; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/40.0.2214.94 Safari/537.36</div></pre></td></tr></table></figure>
<h2 id="示例程序"><a href="#示例程序" class="headerlink" title="示例程序"></a>示例程序</h2><p>通过几段示例程序使用Gworm爬取京东20页的图书信息</p>
<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p><code>GwormBox</code>顾名思义为爬虫箱子，使用单例模式初始化，保存所有的爬虫规则。<code>RequestProperties</code>为整个爬虫框架配置请求参数，<code>addGworm</code>方法添加一套爬取规则。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div></pre></td><td class="code"><pre><div class="line">//src\test\java\com\gyak\test\Test.java</div><div class="line">GwormBox gwormBox = GwormBox.getInstance();</div><div class="line">RequestProperties rp = RequestProperties.getInstance();</div><div class="line">//REQUEST_FILE 请求参数文件名</div><div class="line">rp.initProperties(ClassLoader.getSystemResourceAsStream(REQUEST_FILE));</div><div class="line">//WORM_CONFIG 爬取配置文件名</div><div class="line">//NAME 对配置设置的别名</div><div class="line">gwormBox.addGworm(WORM_CONFIG, NAME);</div><div class="line">```        </div><div class="line"></div><div class="line">### 链接生成器</div><div class="line"></div><div class="line">url生成器用来生产爬取目标，方便串行、并行的爬取目标，接口为`UrlGeneration`</div><div class="line">```java</div><div class="line">//src\test\java\com\gyak\test\Test.java</div><div class="line">class JdUrlGeneration implements UrlGeneration &#123;</div><div class="line"></div><div class="line">    private int currentPage = 1;</div><div class="line">    private final String page = "http://list.jd.com/list.html?cat=1713,3258,3297&amp;page=%d&amp;trans=1&amp;JL=6_0_0";</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getStart() &#123;</div><div class="line">        return 1;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public int getEnd() &#123;</div><div class="line">        return 20;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public void next() &#123;</div><div class="line">        currentPage ++;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    @Override</div><div class="line">    public HasUrl getCurrentbindObj() &#123;</div><div class="line">        return new HasUrl() &#123;</div><div class="line">            private String url = String.format(page, currentPage);</div><div class="line">            @Override</div><div class="line">            public String getUrl() &#123;</div><div class="line">                return url;</div><div class="line">            &#125;</div><div class="line">        &#125;;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3 id="数据操作"><a href="#数据操作" class="headerlink" title="数据操作"></a>数据操作</h3><p><code>GwormCoordinate</code>规则定位器，传入<code>GwormAction</code>中用来指定使用的规则，实现虚函数<code>action</code>用来处理已经爬回的json数据，<code>bindObj</code>对应URL生成器绑定的对象。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//src\test\java\com\gyak\test\Test.java</span></div><div class="line">UrlGeneration jd = <span class="keyword">new</span> JdUrlGeneration();</div><div class="line"><span class="comment">//NAME 爬虫规则的别名</span></div><div class="line"><span class="comment">//URL_ID 规则中指定链接</span></div><div class="line">GwormCoordinate coordinate = <span class="keyword">new</span> GwormCoordinate(NAME, URL_ID); </div><div class="line"><span class="comment">//concurrency 并发数</span></div><div class="line">GwormAction ga = <span class="keyword">new</span> GwormAction(concurrency, jd, coordinate) &#123;</div><div class="line">	<span class="comment">/**</span></div><div class="line">     * 爬取结果的处理函数</div><div class="line">     * <span class="doctag">@param</span> json 爬取的JSON</div><div class="line">     * <span class="doctag">@param</span> bind 对应url生成器绑定的对象</div><div class="line">     */</div><div class="line">    <span class="meta">@Override</span></div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">action</span><span class="params">(String json, Object bindObj)</span> </span>&#123;</div><div class="line">        JsonArray jsonArray = json.get(BOOK_LIST).getAsJsonArray();</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">0</span>;i&lt;jsonArray.size();i++) &#123;</div><div class="line">            JsonObject obj = jsonArray.get(i).getAsJsonObject();</div><div class="line">            String bookName = obj.get(BOOK_NAME).getAsString();</div><div class="line">            String bookPage = obj.get(BOOK_PAGE).getAsString();</div><div class="line">            String bookAuthor = obj.get(BOOK_AUTHOR).getAsString();</div><div class="line">            String bookComment = obj.get(BOOK_COMMENT).getAsString();</div><div class="line">            System.out.println(<span class="string">"书名："</span> + bookName);</div><div class="line">            System.out.println(<span class="string">"购买链接："</span> + bookPage);</div><div class="line">            System.out.println(<span class="string">"作者："</span> + bookAuthor);</div><div class="line">            System.out.println(<span class="string">"￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣￣"</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;;</div><div class="line"></div><div class="line">ga.work(); <span class="comment">//启动爬取</span></div></pre></td></tr></table></figure></p>
<h3 id="异步加载"><a href="#异步加载" class="headerlink" title="异步加载"></a>异步加载</h3><p>对于有些通过异步来加载数据的网页，提取这部分数据必须运行js后方能获得，对于这些网页可以自行实现<a href="/src/main/java/com/gyak/http/Htmlable.java">Htmlable</a>（例如调用Chrome来获取html）接口。</p>
<p>最新添加了ChromeProxy类，实现了调用Chrome来爬取异步加载页面，具体示例详见<a href="/src/test/java/com/gyak/test/ChromeProxyTest.java">ChromeProxy</a><br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">ChromeProxy chromeProxy = <span class="keyword">new</span> ChromeProxy(<span class="string">"C:\\Users\\guiya\\Desktop\\chromedriver.exe"</span>);</div></pre></td></tr></table></figure></p>
<p><a href="https://sites.google.com/a/chromium.org/chromedriver/" target="_blank" rel="external">ChromeDriver下载地址</a></p>
<p><a href="http://www.seleniumhq.org/download/" target="_blank" rel="external">其他WebDriver下载地址</a></p>
<p>运行测试代码时，请修改为自己WebDriver放置的路径。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2016/12/10/一团乱麻/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/12/10/一团乱麻/" itemprop="url">
                  一团乱麻
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-12-10T17:40:33+08:00">
                2016-12-10
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/广州/" itemprop="url" rel="index">
                    <span itemprop="name">广州</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/12/10/一团乱麻/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/12/10/一团乱麻/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="饿货"><a href="#饿货" class="headerlink" title="饿货"></a>饿货</h2><p>很早之前我就确认过一个事实，我不是一个吃货，而是一个彻彻底底的饿货，所谓饿货吃是没有多少讲究的，唯独食量可以和吃货一比，吃货则不同，精挑细选，为了食物可以走南闯北。<br>来到广州的饿货我丝毫没有吃货前来的朝圣感，每日亵渎食物也沾沾自喜，既不会有神灵的惩罚，也不会在乎公司的餐补。直到我点了一份鱼丸。</p>
<h2 id="鱼丸"><a href="#鱼丸" class="headerlink" title="鱼丸"></a>鱼丸</h2><p>林是我的同事，是一个发型极好的小青年，每每映入我眼帘的永远是他的发型。颜值当然不可能是我们的共同点，但我们一个思想江化，一个江信江疑。无论是代码搭档起来还是使用膜法，乃是绝配。<br>鱼丸事件结束后，他告诉我，广州食物是有“毒”的，所谓毒是需要被中和的，否则一定会从身体的薄弱处爆发出来，不用害怕，这解药遍布于广州大街小巷。</p>
<h2 id="凉茶"><a href="#凉茶" class="headerlink" title="凉茶"></a>凉茶</h2><p>寻到一家凉茶铺子，并没有林说的那么简单，但为了解毒，这些功夫也不算什么。<br>这救命的凉茶摆在我面前与王老吉有几分相似，难道也是红糖味儿嘛，定要一饮而尽。</p>
<h2 id="红色石头"><a href="#红色石头" class="headerlink" title="红色石头"></a>红色石头</h2><p>味道让人永生难忘，像用红砖头磨出的分泡制而成，嗓子被这石头堵住，七魂六魄被苦的颠三倒四。然而我的肠胃并没有好，身体更加虚落，精神涣散。</p>
<h2 id="粥"><a href="#粥" class="headerlink" title="粥"></a>粥</h2><p>在广州万事是离不开吃的，虚落对应的当然是食补。<br>斌是我的前辈，也是我们的司机，无论是开发还是生活遇到麻烦，他就会化身为铜锣湾的浩南，尽显一个扛把子的本色。<br>浩南永远是浩南，变身只差一个契机，而那一天，他准备带我们去长洲收收钱，哦不，尝尝粥。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2016/02/01/云中行走/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2016/02/01/云中行走/" itemprop="url">
                  云中行走
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-01T22:10:16+08:00">
                2016-02-01
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/财大/" itemprop="url" rel="index">
                    <span itemprop="name">财大</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2016/02/01/云中行走/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2016/02/01/云中行走/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>“生活就应处于生命的边缘，你必须反抗，不循规蹈矩，永不止步，拒绝重复自己，把每一天、每一年、每一个想法视为真正的挑战，这样你就能成为一个走钢丝的人。”</strong></p>
<p><strong>“当你呕心沥血的投入工作，却看上去游刃有余，这才是一种艺术。” —— 菲利普·帕特</strong></p>
<p><strong>这同样是我追求的东西，wish me good luck。</strong></p>
<img src="/images/云中行走.jpg">

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://geekcat.me/2015/11/03/尘埃落定，一点面试经验/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="geekcat">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/images/user.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="GeekCat的脑窝">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="GeekCat的脑窝" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/11/03/尘埃落定，一点面试经验/" itemprop="url">
                  尘埃落定，一点面试经验
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2015-11-03T15:35:27+08:00">
                2015-11-03
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/开发/" itemprop="url" rel="index">
                    <span itemprop="name">开发</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/2015/11/03/尘埃落定，一点面试经验/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/03/尘埃落定，一点面试经验/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>本文只对身处渣校，有一定水平，并且希望通过校招进入第一梯队的IT公司的同学有一丢丢帮助，其他人士可以无视</strong></p>
<h1 id="1-准备工作"><a href="#1-准备工作" class="headerlink" title="1.准备工作"></a>1.准备工作</h1><h2 id="选择校招蹲点的位置"><a href="#选择校招蹲点的位置" class="headerlink" title="选择校招蹲点的位置"></a>选择校招蹲点的位置</h2><p>翻遍你感兴趣的所有公司官网，查询校招宣讲路线图，选定一个长期蹲点处（PS：渣校就是这样好公司重来不会来江西的啦┑(￣Д ￣)┍）。</p>
<p>尽量覆盖最多的公司 (你当然不想错过任何一个机会对吧)<br>有熟人介绍地形 （租房点的选择还有各种宣讲教室的位置有熟人指点的话一定会轻松许多）</p>
<h2 id="准备笔试题"><a href="#准备笔试题" class="headerlink" title="准备笔试题"></a>准备笔试题</h2><p>知识点的复习，这个阶段的复习主要针对于第一轮的笔试，这一轮的笔试考察的知识点会非常的广，本科的操作系统、计算机网络、组成原理、数字逻辑、概率论以及离散数学等等，还有你所报的岗位，一般至少要考察你一门语言的掌握程度。在知识点这么广的情况下我是推荐去一些网站上做一做大公司们往年的面试题，首先复习效率比较高（当然不是叫大家去背题、刷题啊，是要完全理解）。其次熟悉面试题的类型，到时候考试就不会莫名其妙了。</p>
<h2 id="项目准备"><a href="#项目准备" class="headerlink" title="项目准备"></a>项目准备</h2><p>项目可以是你的毕业设计或者平时开发的一些轮子甚至是编程马拉松之类的比赛作品，累计到三个能拿的出手的作品将极大提高你的竞争力，这一部分就主要是毕业前的积累。</p>
<h1 id="2-面试心得"><a href="#2-面试心得" class="headerlink" title="2.面试心得"></a>2.面试心得</h1><p>选定蹲点处后，开始每天跑宣讲会，对于不是本地的公司一般第一轮笔试在宣讲会结束后马上开始，第一轮技术面试也要看是不是本地公司，不是的话一般第二天就会立马开始，技术通过会紧接着HR面，而本地公司时间将会被拉长，每次面试三天到一个星期都是有可能的。</p>
<h2 id="第一轮笔试"><a href="#第一轮笔试" class="headerlink" title="第一轮笔试"></a>第一轮笔试</h2><p>我建议在笔试前一天再看一看这家公司往年的面试题，因为一个公司的题目风格基本是不会有太大变化的，可以说是换汤不换药，温习一遍有益无害。</p>
<h2 id="技术面试"><a href="#技术面试" class="headerlink" title="技术面试"></a>技术面试</h2><p>我第一次技术面试是献给了美图公司，在一个小咖啡馆里进行，面试官很和蔼很nice，先是叫我做一个自我介绍，然后谈谈自己做过哪些项目，通过你的自我介绍和项目面试官大概知道你熟悉哪些方面开发，为了验证你真实性，最后会问你许多相关的技术问题，如果之前有编造的话是不可能不露出马脚的（PS:能来面你的技术人员都是有能力完爆应届生的）。</p>
<p>如果以你的能力可以顶住最后的提问基本上这个offer拿到了一半（有一两个不会都因该是可以的以我的经验），在接下来的技术二面难度应该是跟第一轮持平的，不过在二面中更倾向于查漏，面试官会更关注第一轮中没有考察或者答错的方面，比如第一轮没有怎么问算法题，这一轮很可能就是算法的轰炸了。</p>
<h2 id="HR面"><a href="#HR面" class="headerlink" title="HR面"></a>HR面</h2><p>HR面被刷也是很有可能的，不过我要说的是只要你性格不奇葩到令人发指，被刷的原因就都不在HR面，而是前几轮的综合分数偏低，在横向比较下靠后。所以面HR只要正常发挥就好，根本没什么技巧，不过要是问道薪资的问题，我建议是遇到十分想进的公司可以有所让步，或者把皮球退给HR，说公式可以按我的能力开薪资，其他就可以坚持一下，自信甩出一句“我的能力值这个价”</p>
<h2 id="技术总监面"><a href="#技术总监面" class="headerlink" title="技术总监面"></a>技术总监面</h2><p>这一面主要看公司，有少数公司在HR面后加最后一轮总监，面试过程跟前面的技术面差不多，但是基本上会被碾压的很厉害，这一轮的目的有两个。</p>
<p>这个总监很可能就是你未来的顶头上司，他来看看这个人到底顺不顺眼<br>给你展示总监的技术水平，全面的碾压你，告诉你你选择本公司有很大的学习空间<br>最后祝愿大家都找到满意的工作 o(￣▽￣)ブ</p>

          
        
      
    </div>

    <div>
      
    </div>

    <div>
      
    </div>


    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel sidebar-panel-active">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/user.png"
               alt="geekcat" />
          <p class="site-author-name" itemprop="name">geekcat</p>
          <p class="site-description motion-element" itemprop="description">参差多态是幸福的本源</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">8</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">21</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">geekcat</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Pisces
  </a>
</div>


        

        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  
  <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.0"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"guiyanakuang"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="/lib/ua-parser-js/dist/ua-parser.min.js?v=0.7.9"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  

  


</body>
</html>
